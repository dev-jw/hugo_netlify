---
title: "理解YUV格式"
date: 2020-08-29T16:08:53+08:00
draft: true
tags: ["Metal", "iOS"]
url:  "yuv"

---

做视频图像处理，**YUV 格式**是需要掌握的最基本的知识点

#### 颜色空间

YUV是一个颜色空间，RGB是大家非常熟悉的另外一个颜色空间。

常用的颜色空间有：

- YUV，用于视频图像的压缩、显示等。
- RGB/RGBA，用于graphic上的显示等，最为常见。
- HSL/HSV，同样用于显示。
- CMYK，用于印刷之类。

#### 比特深度/位深

每个数据采用几个比特表示，位深越大，表示数据的阶数越多

一般最为常见的是 `8bit`，也就是一个像素。现在已经有 `10bit` 视频流。医学显示器上位深可以达到 `12bit`。

#### 颜色空间

**RGB颜色空间**

RGB颜色空间是指每种颜色都可以用三原色来表示，RGB 分别取不同的值，展示不同的颜色。

RGB 相同时，可以简单降为灰度图。`#000000`表示黑色，`#ffffff`表示白色，是非常直观的，也易于理解

![image-20200831163914279](https://w-md.imzsy.design/image-20200831163914279.png)



用RGB表示的图像，每个像素点都有三原色，每种颜色都会占用 `8bit`，即一个字节，所以一个像素点占用 `24bit`，即 3 个字节

![image-20200831171055478](https://w-md.imzsy.design/image-20200831171055478.png)

> 假设，现在有一张 `1920 * 1080` 大小的图片，该图片就会有 `1920 * 1080` 个像素点，其中每个像素点都采用 `RGB` 颜色编码格式
>
> 那么，这张图片就会占用 `1920 * 1080 * 3 / 1024 / 1024 = 5.932617188MB` 的存储空间。



**YUV颜色空间**

YUV颜色空间与RGB颜色空间具有不同的标准，YUV格式有3 个分量：

```ruby
- Y 亮度
- U/V 色度分量
```

和 RGB 类似，每个像素点都包含 `Y、U、V` 3个分量

![image-20200831170247895](https://w-md.imzsy.design/image-20200831170247895.png)

YUV 格式就相对没有那么直观。

YUV 的意义前面有介绍，其中`U/V`两个分量是有符号的，对比 `8bit` 的情况下，可以认为是有 `bias = -2^7`的

因此，**Y 的取值范围是[0, 255]，U/V的取值范围是[-127, 128]**

当 U/V 为 0 的时候，表示没有颜色，颜色为灰色，其二进制表示为`0x80`。（`0x80 - bias = 0`）

所以`0x008080`是黑色，`0xff8080` 为白色

![image-20200831171109106](https://w-md.imzsy.design/image-20200831171109106.png)

#### 采样率

YUV格式有 `4:4:4`, `4:2:2`, `4:2:0` 三种常见的采样方式

- 4：4：4，每个像素采样YUV三个分量
- 4：2：2，每个像素采样Y分量，UV分量水平方向每两个像素采样一次
- 4：2：0，每个像素采样Y分量，UV分量水平数值方向每4个像素采样一次

